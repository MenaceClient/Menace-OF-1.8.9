package dev.menace.utils.altmanager;

import java.net.Proxy;

import com.mojang.authlib.Agent;
import com.mojang.authlib.exceptions.AuthenticationException;
import com.mojang.authlib.yggdrasil.YggdrasilAuthenticationService;
import com.mojang.authlib.yggdrasil.YggdrasilUserAuthentication;
import com.thealtening.AltService;

import net.minecraft.client.Minecraft;
import net.minecraft.util.Session;

public class AlteningLogin {

	public static void login(String username, String password) throws AuthenticationException, NoSuchFieldException, IllegalAccessException {
		new AltService().switchService(AltService.EnumAltService.THEALTENING);
        YggdrasilUserAuthentication authentication = (YggdrasilUserAuthentication) new YggdrasilAuthenticationService(Proxy.NO_PROXY, "")
                .createUserAuthentication(Agent.MINECRAFT);
        authentication.setUsername(username);
        authentication.setPassword(password);
        authentication.logIn();

        Minecraft.getMinecraft().session = new Session(authentication.getSelectedProfile().getName(), authentication.getSelectedProfile().getId().toString(),
                authentication.getAuthenticatedToken(), "mojang");
	}
	
}
