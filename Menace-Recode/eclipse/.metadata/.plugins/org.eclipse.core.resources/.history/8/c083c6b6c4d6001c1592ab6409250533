package dev.menace.module;

import java.io.File;
import java.lang.reflect.Field;
import java.util.ArrayList;
import java.util.Iterator;

import com.google.gson.JsonObject;

import net.minecraft.crash.CrashReport;

public class ModuleManager {

	public ArrayList<Module> modules = new ArrayList<Module>();

	//COMBAT
	
	//MOVEMENT
	
	//PLAYER
	
	//WORLD
	
	//MISC

	public ModuleManager() {
		try
		{
			for(Field field : ModuleManager.class.getDeclaredFields())
			{
				if(!field.getName().endsWith("Module"))
					continue;

				Module module = (Module)field.get(this);
				modules.add(module);
			}

		}catch(Exception e)
		{
			String message = "Initializing Menace modules";
			CrashReport report = CrashReport.makeCrashReport(e, message);
		}
	}

	public ArrayList<Module> getModules() {
		return modules;
	}

	public ArrayList<Module> getActiveModules() {
		ArrayList<Module> activeModules = new ArrayList<Module>();

		for (Module m : modules) {
			if (m.isToggled()) activeModules.add(m);
		}

		return activeModules;
	}
	
	public Module getModuleByName(String name) {
		return modules.stream().filter(module -> module.getName().equalsIgnoreCase(name)).findFirst().orElse(null);
	}

	public ArrayList<Module> getModulesByCategory(Category c) {
		ArrayList<Module> list = new ArrayList<Module>();
		modules.stream().forEach(module ->{ 
			if (module.getCategory().equals(c)) {
				list.add(module);
			}
		});
		return list;
	}

}